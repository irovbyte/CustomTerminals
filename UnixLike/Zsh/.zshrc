# ============================================================
# 1. Instant Prompt (—É—Å–∫–æ—Ä–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ Powerlevel10k)
# ============================================================
if [[ -r "${XDG_CACHE_HOME:-$HOME/.cache}/p10k-instant-prompt-${(%):-%n}.zsh" ]]; then
  source "${XDG_CACHE_HOME:-$HOME/.cache}/p10k-instant-prompt-${(%):-%n}.zsh"
fi

# ============================================================
# 2. Oh My Zsh ‚Äî –±–∞–∑–æ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
# ============================================================
export ZSH="$HOME/.oh-my-zsh"
ZSH_THEME="powerlevel10k/powerlevel10k"

# ============================================================
# 3. –ü–ª–∞–≥–∏–Ω—ã Oh My Zsh
# ============================================================
plugins=(
  git
  zsh-autosuggestions
  zsh-syntax-highlighting
)

source $ZSH/oh-my-zsh.sh

# ============================================================
# 4. Powerlevel10k ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–µ–º—ã
# ============================================================
[[ ! -f ~/.p10k.zsh ]] || source ~/.p10k.zsh

# ============================================================
# 5. irovbyte auto-restore system
# ============================================================
CONFIG_DIR="$HOME/.config/irovbyte"
CONFIG_FILE="$CONFIG_DIR/config.zsh"
REPO_URL="https://github.com/irovbyte/CustomTerminals.git"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –∫–æ–Ω—Ñ–∏–≥–∞
if [ ! -f "$CONFIG_FILE" ]; then
    echo ""
    echo "‚ö†Ô∏è  –ö–æ–Ω—Ñ–∏–≥ irovbyte –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç."
    echo "–ë–µ–∑ –Ω–µ–≥–æ –≤—ã –Ω–µ –±—É–¥–µ—Ç–µ –ø–æ–ª—É—á–∞—Ç—å –Ω–æ–≤—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏ –∞–ª–∏–∞—Å—ã."
    echo ""
    read -p "üì• –°–∫–∞—á–∞—Ç—å –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥? (y/n): " answer

    if [[ "$answer" == "y" || "$answer" == "Y" ]]; then
        echo "üîÑ –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é –∫–æ–Ω—Ñ–∏–≥–∏ irovbyte..."
        rm -rf "$CONFIG_DIR" 2>/dev/null
        git clone "$REPO_URL" "$CONFIG_DIR"
        echo "‚úÖ –ö–æ–Ω—Ñ–∏–≥ —É—Å–ø–µ—à–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω!"
    else
        echo "‚õî –ö–æ–Ω—Ñ–∏–≥ –Ω–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω. –ù–æ–≤—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è irovbyte –ø—Ä–∏–º–µ–Ω—è—Ç—å—Å—è –Ω–µ –±—É–¥—É—Ç."
        echo ""
    fi
fi

# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥–∞
if [ -f "$CONFIG_FILE" ]; then
    source "$CONFIG_FILE"
fi